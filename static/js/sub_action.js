// action random movies array
const movies = [{
    title: "분노의 질주: 더 세븐",
    desc: "역대 최강의 멤버 VS 사상 최악의 상대",
    age: "15",
    ott: ["왓챠", "웨이브"],
    runtime: "138분",
    story: `역대 최강의 멤버 VS 사상 최악의 상대
    팀을 지키기 위한 그들의 반격이 시작된다!
    거대 범죄 조직을 소탕한 뒤 전과를 사면 받고, 평범한 일상을 되찾은 도미닉(빈 디젤)과 멤버들.
    하지만 평화도 잠시, 한(성 강)의 갑작스러운 죽음에 이어, 도미닉의 집이 순식간에 폭파당한다.
    그들을 차례대로 제거하려는 최악의 상대 데카드 쇼(제이슨 스타뎀)의 등장으로 도미닉은 다시 한 번 역대 최강의 멤버들을 불러모아 숨막히는 반격을 결심하는데…`,
  },
  {
    title: "탑건: 매버릭",
    desc: "한순간의 실수도 용납되지 않는 하늘 위, 가장 압도적인 비행이 시작된다!",
    age: "12",
    ott: ["웨이브"],
    runtime: "130분",
    story: `한순간의 실수도 용납되지 않는 하늘 위,
    가장 압도적인 비행이 시작된다!
    최고의 파일럿이자 전설적인 인물 매버릭(톰 크루즈)은 자신이 졸업한 훈련학교 교관으로 발탁된다.
    그의 명성을 모르던 팀원들은 매버릭의 지시를 무시하지만 실전을 방불케 하는 상공 훈련에서 눈으로 봐도 믿기 힘든 전설적인 조종 실력에 모두가 압도된다.
    매버릭의 지휘아래 견고한 팀워크를 쌓아가던 팀원들에게 국경을 뛰어넘는 위험한 임무가 주어지자
    매버릭은 자신이 가르친 동료들과 함께 마지막이 될 지 모를 하늘 위 비행에 나서는데…`
  },
  {
    title: "어벤져스: 인피니티 워",
    desc: "새로운 조합을 이룬 어벤져스, 역대 최강 빌런 타노스에 맞서 세계의 운명이 걸린 인피니티 스톤을 향한 무한 대결이 펼쳐진다!",
    age: "12",
    ott: ["웨이브"],
    runtime: "149분",
    story: `새로운 조합을 이룬 어벤져스,
    역대 최강 빌런 타노스에 맞서
    세계의 운명이 걸린 인피니티 스톤을 향한
    무한 대결이 펼쳐진다!
    4월, 마블의 클라이맥스를 목격하라!`
  },
  {
    title: "범죄도시",
    desc: "통쾌하고! 화끈하고! 살벌하게! 올 추석, 나쁜 놈들 때려잡는 강력반 형사들의 ‘조폭소탕작전’이 시작된다!",
    age: "19",
    ott: ["왓챠", "티빙", "웨이브"],
    runtime: "121분",
    story: `“오늘 밤, 다 쓸어버린다!”
    2004년 서울…
    하얼빈에서 넘어와 단숨에 기존 조직들을 장악하고 가장 강력한 세력인 춘식이파 보스 ‘황사장(조재윤 분)’까지 위협하며 도시 일대의 최강자로 급부상한 신흥범죄조직의 악랄한 보스 ‘장첸(윤계상 분)’.
    대한민국을 뒤흔든 ‘장첸(윤계상 분)’ 일당을 잡기 위해 오직 주먹 한방으로 도시의 평화를 유지해 온 괴물형사 ‘마석도(마동석 분)’와 인간미 넘치는 든든한 리더 ‘전일만(최귀화 분)’ 반장이 이끄는 강력반은 나쁜 놈들을 한방에 쓸어버릴 끝.짱.나.는. 작전을 세우는데…
    통쾌하고! 화끈하고! 살벌하게!
    올 추석, 나쁜 놈들 때려잡는 강력반 형사들의 ‘조폭소탕작전’이 시작된다!`
  },
  {
    title: "베테랑",
    desc: "베테랑 광역수사대 VS 유아독존 재벌 3세 자존심을 건 한판 대결이 시작된다!",
    age: "15",
    ott: ["왓챠", "티빙", "웨이브"],
    runtime: "123분",
    story: `한 번 꽂힌 것은 무조건 끝을 보는 행동파 ‘서도철’(황정민), 20년 경력의 승부사 ‘오팀장’(오달수), 위장 전문 홍일점 ‘미스봉’(장윤주), 육체파 ‘왕형사’(오대환), 막내 ‘윤형사’(김시후)까지 겁 없고, 못 잡는 것 없고, 봐주는 것 없는 특수 강력사건 담당 광역수사대.
    오랫동안 쫓던 대형 범죄를 해결한 후 숨을 돌리려는 찰나, 서도철은 재벌 3세 ‘조태오’(유아인)를 만나게 된다. 세상 무서울 것 없는 안하무인의 조태오와 언제나 그의 곁을 지키는 오른팔 ‘최상무’(유해진). 서도철은 의문의 사건을 쫓던 중 그들이 사건의 배후에 있음을 직감한다.
    건들면 다친다는 충고에도 불구하고 포기하지 않는 서도철의 집념에 판은 걷잡을 수 없이 커져가고 조태오는 이를 비웃기라도 하듯 유유히 포위망을 빠져 나가는데…
    베테랑 광역수사대 VS 유아독존 재벌 3세
    2015년 여름, 자존심을 건 한판 대결이 시작된다!`
  },
  {
    title: "그레이 맨",
    desc: "CIA의 사주를 받은 소시오패스 전 동료에게 쫓기며 시작되는 액션 블록버스터",
    age: "15",
    ott: ['넷플릭스'],
    runtime: "138분",
    story: `그 누구도 실체를 몰라 '그레이 맨'으로 불리는 CIA의 암살 전문 요원이 우연히 CIA의 감추고 싶은 비밀을 알게 되고, CIA의 사주를 받은 소시오패스 전 동료에게 쫓기며 시작되는 액션 블록버스터`
  },
  {
    title: "미션 임파서블: 폴아웃",
    desc: "예측 할 수 없는 미션. 피할 수 없는 선택",
    age: "15",
    ott: ["웨이브"],
    runtime: "147분",
    story: `예측 할 수 없는 미션. 피할 수 없는 선택
    전 세계 최강의 스파이 기관 IMF의 최고 요원 에단 헌트(톰 크루즈)와 그의 팀은 테러조직의 핵무기 소지를 막기 위해 미션에 착수한다.
    에단 헌트는 작전 수행 중 예상치 못한 결단을 내리게 되고, 중앙정보국 CIA는 그를 견제하기 위해 상급 요원 어거스트 워커(헨리 카빌)를 파견한다.
    최악의 테러 위기와 라이벌의 출현 속, 팀이 행한 모든 선의의 선택들이 최악의 결과로 돌아오면서 미션은 점점 더 예측할 수 없는 상황으로 치닫게 되는데…
    사상 가장 불가능한 미션, 피할 수 없다면 끝내야 한다!`
  },
  {
    title: "인셉션",
    desc: "꿈 VS 현실 시간, 규칙, 타이밍 모든 것이 완벽해야만 하는, 단 한 번도 성공한 적 없는 ‘인셉션’ 작전이 시작된다!",
    age: "12",
    ott: ["왓챠", "티빙", "웨이브"],
    runtime: "147분",
    story: `타인의 꿈에 들어가 생각을 훔치는 특수 보안요원 코브.
    그를 이용해 라이벌 기업의 정보를 빼내고자 하는 사이토는
    코브에게 생각을 훔치는 것이 아닌, 생각을 심는 ‘인셉션’ 작전을 제안한다.
    성공 조건으로 국제적인 수배자가 되어있는 코브의 신분을 바꿔주겠다는
    거부할 수 없는 제안을 하고, 사랑하는 아이들에게 돌아가기 위해 그 제안을 받아들인다.
    최강의 팀을 구성, 표적인 피셔에게 접근해서 ‘인셉션’ 작전을 실행하지만
    예기치 못한 사건들과 마주하게 되는데…
    꿈 VS 현실
    시간, 규칙, 타이밍 모든 것이 완벽해야만 하는,
    단 한 번도 성공한 적 없는 ‘인셉션’ 작전이 시작된다!`
  },
  {
    title: "공조",
    desc: "그들에게 주어진 시간은 단 3일, 한 팀이 될 수 없는 남북 형사의 예측불가 공조수사가 시작된다!",
    age: "15",
    ott: ["왓챠", "티빙", "웨이브"],
    runtime: "125분",
    story: `비밀리에 제작된 위조 지폐 동판을 탈취하려는 내부 조직에 의해 작전 중 아내와 동료들을 잃게 된 특수 정예부대 출신의 북한형사 ‘림철령’(현빈). 동판을 찾아야만 하는 북한은 남한으로 숨어든 조직의 리더 ‘차기성’(김주혁)을 잡기 위해 역사상 최초의 남북 공조수사를 요청하고, 그 적임자로 철령을 서울에 파견한다. 한편, 북한의 속내가 의심스런 남한은 먼저 차기성을 잡기 위한 작전을 계획하고, 정직 처분 중인 생계형 형사 ‘강진태’(유해진)에게 공조수사를 위장한 철령의 밀착 감시를 지시한다.
    임무를 완수해야 하는 철령과 임무를 막아야만 하는 진태.
    그들에게 주어진 시간은 단 3일,
    한 팀이 될 수 없는 남북 형사의 예측불가 공조수사가 시작된다!`
  },
  {
    title: "유체이탈자",
    desc: "진짜 나를 찾기 위한 본능적 액션이 시작된다!",
    age: "15",
    ott: ["넷플릭스", "티빙", "웨이브"],
    runtime: "108분",
    story: `“누가 진짜 나인지 모르겠어요”
    교통사고 현장에서 눈을 뜬 한 남자.
    거울에 비친 낯선 얼굴과 이름, 자신이 누구인지 기억이 나지 않는다.
    “또 바뀌었어. 낮에도 바뀌더니 밤에도 또”
    잠시 후, 또 다른 사람의 몸에서 깨어난 남자.
    그는 12시간마다 몸이 바뀐다는 사실을 깨닫게 되고,
    자신을 둘러싼 사람들 사이의 연결고리를 찾기 시작한다.
    그가 12시간마다 몸이 바뀌었던 사람들, 가는 곳마다 나타나는 의문의 여자까지,
    그리고, 이들이 쫓고 있는 국가정보요원 '강이안'.
    “이제 알게 됐어. 내가 뭘 해야 되는지”
    모두가 혈안이 되어 쫓고 있는 '강이안'이 바로 자신임을 직감한 남자,
    자신을 찾기 위한 사투를 시작하는데…
    진짜 나를 찾기 위한 본능적 액션이 시작된다!`
  },
  {
    title: "킬빌 VOL.1",
    desc: "빌을 죽여라...! 복수는 지금부터 시작이다!",
    age: "19",
    ott: ["왓챠", "티빙", "웨이브"],
    runtime: "110분",
    story: `빌을 죽여라...!
    복수는 지금부터 시작이다!
    핏빛으로 얼룩진 순백의 웨딩드레스!...............어느 한적한 오후, 행복한 결혼식을 앞둔 ‘더 브라이드’와 그녀의 신랑, 그리고 모든 하객들이 의문의 조직에 의해 처참하게 살해당한다. 순백의 웨딩드레스는 피로 얼룩져 결혼식장은 아수라장이 되는데......
    복수의 리스트를 써내려가며!...................그로부터 5년 후, 코마상태의 ‘더 브라이드’는 죽음 직전까지 갔다가 어렵게 깨어난다. 그리고 피로 얼룩진 과거가 그녀의 뇌리에 스치면서 서서히 복수의 리스트를 작성하기 시작한다.
    ‘데들리 바이퍼’를 찾아서!.....................‘더 브라이드’는 전세계적으로 악명높은 살인조직 ‘데들리 바이퍼’의 일원이었고, 조직의 보스인 ‘빌’을 포함한 5명의 일원이 새로운 삶을 앞둔 그녀를 처참하게 무너뜨렸음이 밝혀지자, 그녀는 텍사스, 멕시코, 일본을 방문하며 가장 잔인한 복수를 실행하게 되는데.....`
  },
  {
    title: "매드맥스: 분노의 도로",
    desc: "세상이 멸망하면서 누가 미친 건지 알 수 없어졌다. 나인지 이 세상인지..",
    age: "15",
    ott: ["넷플릭스", "왓챠",],
    runtime: "120분",
    story: `“세상이 멸망하면서 누가 미친 건지 알 수 없어졌다.
    나인지 이 세상인지..”
    핵전쟁으로 멸망한 22세기. 얼마 남지 않은 물과 기름을 차지한 독재자 임모탄 조가 살아남은 인류를 지배한다. 한편, 아내와 딸을 잃고 살아남기 위해 사막을 떠돌던 맥스(톰 하디)는 임모탄의 부하들에게 납치되어 노예로 끌려가고, 폭정에 반발한 사령관 퓨리오사(샤를리즈 테론)는 인류 생존의 열쇠를 쥔 임모탄의 여인들을 탈취해 분노의 도로로 폭주한다. 이에 임모탄의 전사들과 신인류 눅스(니콜라스 홀트)는 맥스를 이끌고 퓨리오사의 뒤를 쫓는데...
    끝내주는 날, 끝내주는 액션이 폭렬한다!`
  },
];

$(document).ready(function () {
  window.onload = function () {
    let i = Math.floor(Math.random() * 10);
    $(".random-video").attr("src", `../static/video/random_action${i}.mp4`);
    // 플레이 상세설명 변경
    let title = document.querySelector(".title");
    let decs = document.querySelector(".decs");
    let ageColor = document.querySelector(".age-color");
    title.innerHTML = movies[i].title;
    decs.innerHTML = `: ${movies[i].desc}`;
    ageColor.innerHTML = movies[i].age;

    // 지원 ott 표기
    let netflix = document.querySelector(".netflix");
    let watcha = document.querySelector(".watcha");
    let tving = document.querySelector(".tving");
    let disney = document.querySelector(".disney");
    let wavve = document.querySelector(".wavve");

    // console.log('넷플릭스', movies[i].ott.indexOf('넷플릭스'))
    // console.log('왓챠', movies[i].ott.indexOf('왓챠'))
    // console.log('티빙', movies[i].ott.indexOf('티빙'))
    // console.log('디즈니', movies[i].ott.indexOf('디즈니'))
    // console.log('웨이브', movies[i].ott.indexOf('웨이브'))

    // reset
    netflix.classList.add("none");
    watcha.classList.add("none");
    tving.classList.add("none");
    disney.classList.add("none");
    wavve.classList.add("none");

    if (movies[i].ott.indexOf("넷플릭스") > -1) {
      netflix.classList.remove("none");
    }
    if (movies[i].ott.indexOf("왓챠") > -1) {
      watcha.classList.remove("none");
    }
    if (movies[i].ott.indexOf("티빙") > -1) {
      tving.classList.remove("none");
    }
    if (movies[i].ott.indexOf("디즈니") > -1) {
      disney.classList.remove("none");
    }
    if (movies[i].ott.indexOf("웨이브") > -1) {
      wavve.classList.remove("none");
    }

    if (movies[i].age === "12") {
      $(".age-color").css("background", "#23A2E4").removeClass("none");
    } else if (movies[i].age === "15") {
      $(".age-color").css("background", "#EDA128").removeClass("none");
    } else if (movies[i].age === "19") {
      $(".age-color").css("background", "#CA2324").removeClass("none");
    } else {
      $(".age-color").css("background", "#3EA14F");
    }
  };
  // 버튼 눌렀을때 랜덤 플레이
  $(".random-button").click(function () {
    let i = Math.floor(Math.random() * 10);
    $(".random-video").attr("src", `../static/video/random_action${i}.mp4`);
    // 플레이 상세설명 변경
    console.log(movies[i]);
    let title = document.querySelector(".title");
    let decs = document.querySelector(".decs");
    let ageColor = document.querySelector(".age-color");
    title.innerHTML = movies[i].title;
    decs.innerHTML = `: ${movies[i].desc}`;
    ageColor.innerHTML = movies[i].age;

    // 지원 ott 표기
    let netflix = document.querySelector(".netflix");
    let watcha = document.querySelector(".watcha");
    let tving = document.querySelector(".tving");
    let disney = document.querySelector(".disney");
    let wavve = document.querySelector(".wavve");

    // console.log('넷플릭스', movies[i].ott.indexOf('넷플릭스'))
    // console.log('왓챠', movies[i].ott.indexOf('왓챠'))
    // console.log('티빙', movies[i].ott.indexOf('티빙'))
    // console.log('디즈니', movies[i].ott.indexOf('디즈니'))
    // console.log('웨이브', movies[i].ott.indexOf('웨이브'))

    // reset
    netflix.classList.add("none");
    watcha.classList.add("none");
    tving.classList.add("none");
    disney.classList.add("none");
    wavve.classList.add("none");

    if (movies[i].ott.indexOf("넷플릭스") > -1) {
      netflix.classList.remove("none");
    }
    if (movies[i].ott.indexOf("왓챠") > -1) {
      watcha.classList.remove("none");
    }
    if (movies[i].ott.indexOf("티빙") > -1) {
      tving.classList.remove("none");
    }
    if (movies[i].ott.indexOf("디즈니") > -1) {
      disney.classList.remove("none");
    }
    if (movies[i].ott.indexOf("웨이브") > -1) {
      wavve.classList.remove("none");
    }

    if (movies[i].age === "12") {
      $(".age-color").css("background", "#23A2E4").removeClass("none");
    } else if (movies[i].age === "15") {
      $(".age-color").css("background", "#EDA128").removeClass("none");
    } else if (movies[i].age === "19") {
      $(".age-color").css("background", "#CA2324").removeClass("none");
    } else {
      $(".age-color").css("background", "#3EA14F");
    }
  });
});

//----------------------------------------------hover animation
let hoverBox = document.querySelectorAll(".hoverbox");
let hoverBoxVd = document.querySelectorAll(".top-video");
let movieImg = document.querySelectorAll(".movie > img");
let modalBox = document.querySelectorAll(".modal-box");
let modalBg = document.querySelector(".modal-bg");
let hoverFilter = document.querySelector(".hover-filter");

//---------------------------------------------hover info
let hoverTitle = document.querySelectorAll(".hover-title");
let hoverAge = document.querySelectorAll(".hover-age");
let hoverRuntime = document.querySelectorAll(".hover-runtime");
let hoverStory = document.querySelectorAll(".hover-story");

for (let i = 0; i < movieImg.length; i++) {
  movieImg[i].addEventListener("mouseenter", function () {
    //hoverFilter
    hoverFilter.style.zIndex = "1";
    // movieImg
    movieImg[i].style.zIndex = "-1";
    movieImg[i].style.transform = "scale(1.5)";
    movieImg[i].style.opacity = "0";
    // hoverBox
    hoverBox[i].style.zIndex = "2";
    hoverBox[i].style.opacity = "1";
    hoverBox[i].style.width = "350px";
    hoverBoxVd[i].style.width = "350px";
    //hoverInfo
    hoverTitle[i].innerText = movies[i].title;
    hoverAge[i].innerText = `${movies[i].age}+`;
    hoverRuntime[i].innerText = movies[i].runtime;
    hoverStory[i].innerText = movies[i].story;

    // hover 연령 색상 변경
    if (movies[i].age === "12") {
      $(".hover-age").css("background", "#23A2E4");
    } else if (movies[i].age === "15") {
      $(".hover-age").css("background", "#EDA128");
    } else if (movies[i].age === "19") {
      $(".hover-age").css("background", "#CA2324");
    } else {
      $(".hover-age").css("background", "#3EA14F");
    }
  });

}

for (let i = 0; i < hoverBox.length; i++) {
  hoverBox[i].addEventListener("mouseleave", function () {
    //hoverFilter
    hoverFilter.style.zIndex = "0";
    // movieImg
    movieImg[i].style.zIndex = "1";
    movieImg[i].style.transform = "scale(1)";
    movieImg[i].style.width = "200px";
    movieImg[i].style.height = "300px";
    movieImg[i].style.opacity = "1";
    // hoverBox
    hoverBox[i].style.zIndex = "-1";
    hoverBox[i].style.opacity = "0";
    hoverBox[i].style.width = "250px";
    hoverBoxVd[i].style.width = "250px";
  });


}
// modal 등장 - fade in , fade out

$(function () {
  $(".fa-chevron-down").click(function () {
    $(".modal-bg").fadeIn(500);

    let v = $(".modal-img").find("video").get(0);
    v.play();
  });
  $(".modal-close-btn").click(function () {
    $(".modal-bg").fadeOut(500);
  });
  $(".modal-exit").click(function () {
    $(".modal-bg").fadeOut(500);
  });

  // 모달창 등장 시, 배경(body)부분의 콘텐츠 고정 , 모달창 내부만 스크롤 생성 및 작동
  var posY;

  $(".bnt_open").on("click", function (e) {
    posY = $(window).scrollTop();

    $("html, body").addClass("not_scroll");
    $(".cont").css("top", -posY);
  });

  $(".bnt_close").on("click", function () {
    $("html, body").removeClass("not_scroll");
    posY = $(window).scrollTop(posY);
  });

  const modalLike = document.querySelectorAll("#modal-like .heart");

  for (let num = 0; num < modalLike.length; num++) {
    modalLike[num].addEventListener('click', function () {
      modalLike[num].classList.toggle("xi-heart-o");
      modalLike[num].classList.toggle("xi-heart");
    })
  }

});